{"componentChunkName":"component---src-templates-docs-template-js","path":"/docs/online/kubernetes/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"kubernetes\" style=\"position:relative;\"><a href=\"#kubernetes\" aria-label=\"kubernetes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kubernetes</h1>\n<p>An Hawtio console that eases the discovery and management of <em>hawtio-enabled</em> <sup><a href=\"#f1\">1</a></sup> applications deployed on Kubernetes.</p>\n<h2 id=\"preparation\" style=\"position:relative;\"><a href=\"#preparation\" aria-label=\"preparation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preparation</h2>\n<p>Prior to the deployment, depending on the cluster types you need to generate either of the <em>proxying</em> or <em>serving</em> certificates.</p>\n<table>\n<thead>\n<tr>\n<th>Certificate</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><em>Proxying</em></td>\n<td>Used to secure the communication between Hawtio Online and the Jolokia agents. A client certificate is generated and mounted into the Hawtio Online pod with a secret, to be used for TLS client authentication.</td>\n</tr>\n<tr>\n<td><em>Serving</em></td>\n<td>Used to secure the communication between the client and Hawtio Online.</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"proxying-certificates\" style=\"position:relative;\"><a href=\"#proxying-certificates\" aria-label=\"proxying certificates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Proxying certificates</h4>\n<p>For Kubernetes, proxing certificates are disabled by default and you don't need to go through the steps.</p>\n<blockquote>\n<p> :warning: This means that client certificate authentication between Hawtio Online and the Jolokia agents is not available by default for Kubernetes, and the Jolokia agents need to disable client certificate authentication so that Hawtio Online can connect to them. You can still use TLS for securing the communication between them.</p>\n<p> It is possible to use a proxying client certificate for Hawtio Online on Kubernetes; it requires you to generate or provide a custom CA for the certificate and then mount/configure it into the Jolokia agent for its client certificate authentication.</p>\n</blockquote>\n<h4 id=\"serving-certificates\" style=\"position:relative;\"><a href=\"#serving-certificates\" aria-label=\"serving certificates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serving certificates</h4>\n<p>For Kubernetes, a serving certificate must be generated manually. Run the following script to generate and set up a certificate for Hawtio Online:</p>\n<pre><code class=\"language-sh\">$ ./scripts/generate-serving.sh [-k tls.key] [-c tls.crt] [SECRET_NAME] [CN]\n</code></pre>\n<p>or:</p>\n<pre><code class=\"language-sh\">$ yarn gen:serving [-k tls.key] [-c tls.crt] [SECRET_NAME] [CN]\n</code></pre>\n<p>You can provide an existing TLS key and certificate by passing parameters <code>-k tls.key</code> and <code>-c tls.crt</code> respectively. Otherwise, a self-signed <code>tls.key</code> and <code>tls.crt</code> will be generated automatically in the working directory and used for creating the serving certificate secret.</p>\n<p>You can optionally pass <code>SECRET_NAME</code> and <code>CN</code> to customise the secret name and Common Name used in the TLS certificate. The default secret name is <code>hawtio-online-tls-serving</code> and CN is <code>hawtio-online.hawtio.svc</code>.</p>\n<p>Now you can run the following instructions to deploy the Hawtio Online console on your Kubernetes cluster.</p>\n<p>You may want to read how to <a href=\"https://kubernetes.io/docs/reference/kubectl/overview/\">get started with the CLI</a> for more information about the <code>kubectl</code> client tool.</p>\n<p>To deploy the Hawtio Online console on Kubernetes, follow the steps below.</p>\n<h4 id=\"cluster-mode\" style=\"position:relative;\"><a href=\"#cluster-mode\" aria-label=\"cluster mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cluster mode</h4>\n<p>If you have Yarn installed:</p>\n<pre><code class=\"language-sh\">$ yarn deploy:k8s:cluster\n</code></pre>\n<p>otherwise:</p>\n<pre><code class=\"language-sh\">$ kubectl apply -k deploy/k8s/cluster/\n</code></pre>\n<h4 id=\"namespace-mode\" style=\"position:relative;\"><a href=\"#namespace-mode\" aria-label=\"namespace mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Namespace mode</h4>\n<p>If you have Yarn installed:</p>\n<pre><code class=\"language-sh\">$ yarn deploy:k8s:namespace\n</code></pre>\n<p>otherwise:</p>\n<pre><code class=\"language-sh\">$ kubectl apply -k deploy/k8s/namespace/\n</code></pre>\n<h2 id=\"deployment\" style=\"position:relative;\"><a href=\"#deployment\" aria-label=\"deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deployment</h2>\n<p>There are two deployment modes you can choose from: <strong>cluster</strong> and <strong>namespace</strong>.</p>\n<table>\n<thead>\n<tr>\n<th>Deployment Mode</th>\n<th>Descripton</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Cluster</td>\n<td>The Hawtio Online console can discover and connect to <em>hawtio-enabled</em> <sup><a href=\"#f1\">1</a></sup> applications deployed across multiple namespaces / projects.</td>\n</tr>\n<tr>\n<td>Namespace</td>\n<td>This restricts the Hawtio Online console access to a single namespace / project, and as such acts as a single tenant deployment.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"authentication\" style=\"position:relative;\"><a href=\"#authentication\" aria-label=\"authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Authentication</h2>\n<p>Hawtio Online currently supports two authentication modes: <code>oauth</code>, which is configured through <code>HAWTIO_ONLINE_AUTH</code> environment variable on Deployment.</p>\n<table>\n<thead>\n<tr>\n<th>Mode</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>form</td>\n<td>Authenticates requests with <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authentication/\">bearer tokens</a> throught the Hawtio login form.</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"creating-user-for-form-authentication\" style=\"position:relative;\"><a href=\"#creating-user-for-form-authentication\" aria-label=\"creating user for form authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating user for Form authentication</h3>\n<p>With the Form authentication mode, any user with a bearer token can be authenticated. See <a href=\"https://kubernetes.io/docs/reference/access-authn-authz/authentication/\">Authenticating</a> for different ways to provide users with bearer tokens.</p>\n<p>Here we illustrate how to create a <code>ServiceAccount</code> as a user to log in to the Hawtio console as an example. See <a href=\"docs/create-user.md\">Creating a Hawtio user for Form authentication</a> for more details.</p>\n<p><a name=\"f1\">1</a>. Containers with a configured port named <code>jolokia</code> and that exposes the <a href=\"https://jolokia.org\">Jolokia</a> API.</p>","frontmatter":{"title":""}}},"pageContext":{"slug":"/docs/online/kubernetes/"}}}