<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Security :: Hawtio</title>
    <meta name="generator" content="Antora 3.1.5">
<link rel='stylesheet' href='../_/css/site.css' />
<link rel='stylesheet' href='../_/css/docs.css' />
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="..">
        <img src="../_/img/hawtio_logo.svg" alt="Hawtio" height="40px" />
      </a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="/">Home</a>
        <a class="navbar-item" href="/docs/get-started.html">Get Started</a>
        <a class="navbar-item" href="/docs/">Docs</a>
        <a class="navbar-item" href="/docs/plugins.html">Plugins</a>
        <a class="navbar-item" href="https://github.com/hawtio/hawtio/releases">Download</a>
        <a class="navbar-item" href="/community/">Community</a>
        <a class="navbar-item" href="https://github.com/hawtio/hawtio">
          <img src="../_/img/social/github-light-32.png" alt="GitHub" height="20px" />
        </a>
        <a class="navbar-item" href="https://twitter.com/hawtio">
          <img src="../_/img/social/twitter-white.png" alt="Twitter" height="20px" />
        </a>
        <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/hawtio">
          <img src="../_/img/social/stackoverflow.png" alt="StackOverflow" height="20px" />
        </a>
      </div>
    </div>
  </nav>
</header>

<div class="body">
<div class="nav-container" data-component="docs" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview-v3.html">Hawtio v3</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="get-started.html">Get Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="versions.html">Supported Versions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using Hawtio</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="keycloak.html">Keycloak Integration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Kubernetes/OpenShift</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/openshift.html">OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/kubernetes.html">Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/create-user.html">Creating a Hawtio user for Form authentication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/generate-certificates.html">Generating Certificates Manually</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/rbac.html">RBAC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="online/develop.html">Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">General Docs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="releases.html">Releases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contributing.html">Contributor Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="releasing.html">Releasing Hawtio</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Documentation</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Documentation</a>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Documentation</a></li>
    <li>Using Hawtio</li>
    <li><a href="security.html">Security</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/hawtio/website/blob/main/modules/ROOT/pages/security.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Security</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hawtio enables authentication out of the box depending on the runtimes/containers it runs with. To use Hawtio with your application, either setting up authentication for the runtime or disabling Hawtio authentication is necessary.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_properties"><a class="anchor" href="#_configuration_properties"></a>Configuration properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following table lists the Security-related configuration properties for the Hawtio core system.</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 1. Security-related configuration properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.authenticationContainerDiscoveryClasses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>io.hawt.web.tomcat.TomcatAuthenticationContainerDiscovery</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of used <code>AuthenticationContainerDiscovery</code> implementations separated by comma. By default there is just <code>TomcatAuthenticationContainerDiscovery</code>, which is used to authenticate users on Tomcat from <code>tomcat-users.xml</code> file. Feel free to remove it if you want to authenticate users on Tomcat from configured JAAS login module or feel free to add more classes of your own.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.authenticationContainerTomcatDigestAlgorithm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When using the Tomcat <code>tomcat-users.xml</code> file, passwords can be hashed instead of plain text. Use this to specify the digest algorithm; valid values are <code>NONE</code>, <code>MD5</code>, <code>SHA</code>, <code>SHA-256</code>, <code>SHA-384</code>, <code>SHA-512</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.authenticationEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether or not security is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.keycloakClientConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>classpath:keycloak.json</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keycloak configuration file used for frontend. It is mandatory if Keycloak integration is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.keycloakEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to enable or disable Keycloak integration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.noCredentials401</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to return HTTP status 401 when authentication is enabled, but no credentials has been provided. Returning 401 will cause the browser popup window to prompt for credentials. By default this option is <code>false</code>, returning HTTP status 403 instead.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.realm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The security realm used to login.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.rolePrincipalClasses</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fully qualified principal class name(s). Multiple classes can be separated by a comma.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admin,manager,viewer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user roles required to be able to login to the console. Multiple roles to allow can be separated by a comma. Set to <code>*</code> or an empty value to disable role checking when Hawtio authenticates a user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.tomcatUserFileLocation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conf/tomcat-users.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify an alternative location for the <code>tomcat-users.xml</code> file, e.g. <code>/production/userlocation/</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_quarkus"><a class="anchor" href="#_quarkus"></a>Quarkus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hawtio can be secured with the authentication mechanisms Quarkus provides, as well as <a href="https://www.keycloak.org">Keycloak</a>.</p>
</div>
<div class="paragraph">
<p>if you want to disable Hawtio authentication for Quarkus, add the following configuration to <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">quarkus.hawtio.authenticationEnabled = false</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_quarkus_authentication_mechanisms"><a class="anchor" href="#_quarkus_authentication_mechanisms"></a>Quarkus authentication mechanisms</h3>
<div class="paragraph">
<p>Hawtio is just a Web application in terms of Quarkus, so <a href="https://quarkus.io/guides/security-authentication-mechanisms">the various mechanisms Quarkus provides</a> can be used to authenticate Hawtio in the same way it authenticates a Web application.</p>
</div>
<div class="paragraph">
<p>Here we show how you can use <a href="https://quarkus.io/guides/security-properties">the properties-based authentication</a> with Hawtio for demonstrating purposes.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The properties-based authentication is not recommended to use in production. This mechanism is for development and testing purposes only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To use the properties-based authentication with Hawtio, add the following dependency to <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-elytron-security-properties-file&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then define users to <code>application.properties</code> to enable the authentication. For example, defining a user <code>hawtio</code> with password <code>s3cr3t!</code> and role <code>admin</code> would look like the following:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">quarkus.security.users.embedded.enabled = true
quarkus.security.users.embedded.plain-text = true
quarkus.security.users.embedded.users.hawtio = s3cr3t!
quarkus.security.users.embedded.roles.hawtio = admin</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_example"><a class="anchor" href="#_example"></a>Example</h4>
<div class="paragraph">
<p>See <a href="https://github.com/hawtio/hawtio/tree/3.x/examples/quarkus">quarkus example</a> for a working example of the properties-based authentication.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quarkus_with_keycloak"><a class="anchor" href="#_quarkus_with_keycloak"></a>Quarkus with Keycloak</h3>
<div class="paragraph">
<p>See <a href="keycloak.html#_quarkus" class="xref page">Keycloak Integration - Quarkus</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_boot"><a class="anchor" href="#_spring_boot"></a>Spring Boot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the standard JAAS authentication, Hawtio on Spring Boot can be secured through <a href="https://spring.io/projects/spring-security">Spring Security</a> or <a href="https://www.keycloak.org">Keycloak</a>.</p>
</div>
<div class="paragraph">
<p>if you want to disable Hawtio authentication for Spring Boot, add the following configuration to <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">hawtio.authenticationEnabled = false</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_spring_security"><a class="anchor" href="#_spring_security"></a>Spring Security</h3>
<div class="paragraph">
<p>To use Spring Security with Hawtio, add <code>org.springframework.boot:spring-boot-starter-security</code> to the dependencies in <code>pom.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
  &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Spring Security configuration in <code>src/main/resources/application.properties</code> should look something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">spring.security.user.name = hawtio
spring.security.user.password = s3cr3t!
spring.security.user.roles = admin,viewer</code></pre>
</div>
</div>
<div class="paragraph">
<p>A security config class has to be defined to set up how to secure the application with Spring Security:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.authorizeRequests().anyRequest().authenticated()
            .and()
            .formLogin()
            .and()
            .httpBasic()
            .and()
            .csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
        return http.build();
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_example_2"><a class="anchor" href="#_example_2"></a>Example</h4>
<div class="paragraph">
<p>See <a href="https://github.com/hawtio/hawtio/tree/3.x/examples/springboot-security">springboot-security example</a> for a working example.</p>
</div>
</div>
<div class="sect3">
<h4 id="_connecting_to_a_remote_application_with_spring_security"><a class="anchor" href="#_connecting_to_a_remote_application_with_spring_security"></a>Connecting to a remote application with Spring Security</h4>
<div class="paragraph">
<p>If you try to connect to a remote Spring Boot application with Spring Security enabled, make sure the Spring Security configuration allows access from the Hawtio console. Most likely, the default CSRF protection prohibits remote access to the Jolokia endpoint and thus causes authentication failures at the Hawtio console.</p>
</div>
<div class="paragraph">
<p>The easiest solution is to disable CSRF protection for the Jolokia endpoint at the remote application as follows.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be aware that it will expose your application at risk of CSRF attacks.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.boot.actuate.autoconfigure.jolokia.JolokiaEndpoint;
import org.springframework.boot.actuate.autoconfigure.security.servlet.EndpointRequest;

@EnableWebSecurity
public class SecurityConfig {

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        ...
        // Disable CSRF protection for the Jolokia endpoint
        http.csrf().ignoringRequestMatchers(EndpointRequest.to(JolokiaEndpoint.class));
        return http.build();
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To secure the Jolokia endpoint even without Spring Security&#8217;s CSRF protection, you need to provide a <code>jolokia-access.xml</code> file under <code>src/main/resources/</code> like the following (snippet) so that only trusted nodes can access it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;restrict&gt;
  ...
  &lt;cors&gt;
    &lt;allow-origin&gt;http*://localhost:*&lt;/allow-origin&gt;
    &lt;allow-origin&gt;http*://127.0.0.1:*&lt;/allow-origin&gt;
    &lt;allow-origin&gt;http*://*.example.com&lt;/allow-origin&gt;
    &lt;allow-origin&gt;http*://*.example.com:*&lt;/allow-origin&gt;

    &lt;strict-checking /&gt;
  &lt;/cors&gt;
&lt;/restrict&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_boot_with_keycloak"><a class="anchor" href="#_spring_boot_with_keycloak"></a>Spring Boot with Keycloak</h3>
<div class="paragraph">
<p>See <a href="keycloak.html#_spring_boot" class="xref page">Keycloak Integration - Spring Boot</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_containers"><a class="anchor" href="#_web_containers"></a>Web containers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hawtio authentication is enabled by default. If you want to disable Hawtio authentication, set the following system property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">hawtio.authenticationEnabled = false</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_jetty"><a class="anchor" href="#_jetty"></a>Jetty</h3>
<div class="paragraph">
<p>To use authentication with Jetty, you first have to set up some users with roles. To do that navigate to the <code>etc/</code> folder of your Jetty installation and create the following file <code>etc/login.properties</code> and enter something like this:</p>
</div>
<div class="listingblock">
<div class="title">etc/login.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">scott=tiger, user
admin=CRYPT:adpexzg3FUZAk,admin,user</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have added two users. The first one named <code>scott</code> with the password <code>tiger</code>. He has the role <code>user</code> assigned to it. The second user <code>admin</code> with password <code>admin</code> which is obfuscated (see Jetty realms for possible encryption methods). This one has the <code>admin</code> and <code>user</code> role assigned.</p>
</div>
<div class="paragraph">
<p>Now create the second file in the same <code>etc/</code> directory called <code>login.conf</code>. This is the login configuration file.</p>
</div>
<div class="listingblock">
<div class="title">etc/login.conf</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">hawtio {
  org.eclipse.jetty.jaas.spi.PropertyFileLoginModule required
  debug="true"
  file="${jetty.base}/etc/login.properties";
};</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Currently the login module <code>org.eclipse.jetty.jaas.spi.PropertyFileLoginModule</code> doesn&#8217;t work with Hawtio. The instructions are kept as-is for illustrative purposes. But to really make it work, use <a href="https://eclipse.dev/jetty/documentation/jetty-10/operations-guide/index.html#og-jaas-loginmodules">different login modules</a> or implement your own <code>PropertyFileLoginModule</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, enable the JAAS module in Jetty. This is done by the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ java -jar $JETTY_HOME/start.jar --add-module=jaas</code></pre>
</div>
</div>
<div class="paragraph">
<p>At last, you have to change the Hawtio configuration:</p>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Table 2. Configuration properties for Jetty authentication</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.authenticationEnabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.realm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admin</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hawtio.rolePrincipalClasses</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>org.eclipse.jetty.jaas.JAASRole</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You have now enabled authentication for Hawtio. Only users with role <code>admin</code> are allowed for login.</p>
</div>
</div>
<div class="sect2">
<h3 id="_apache_tomcat"><a class="anchor" href="#_apache_tomcat"></a>Apache Tomcat</h3>
<div class="paragraph">
<p>Hawtio configuration properties can be passed to Tomcat using <code>CATALINA_OPTS</code> environment variable.</p>
</div>
<div class="paragraph">
<p>By default, Hawtio authentication is enabled. Let&#8217;s set up <code>realm</code> to <code>*</code> to make it work with the Tomcat built-in realm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export CATALINA_OPTS=-Dhawtio.realm=*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hawtio will auto-detect that it is running in Tomcat, and use its user data file (<code>conf/tomcat-users.xml</code>) for security. For example, to set up a new user named <code>scott</code> with password <code>tiger</code>, then edit the file <code>conf/tomcat-users.xml</code> to include:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;user username="scott" password="tiger" roles="tomcat"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can login to Hawtio with the username <code>scott</code> and password <code>tiger</code>.</p>
</div>
<div class="paragraph">
<p>If you only want users of a special role to be able to login Hawtio, you can set the role name in the <code>CATALINA_OPTS</code> environment variable as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export CATALINA_OPTS="-Dhawtio.realm=* -Dhawtio.role=manager"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the user must be in the <code>manager</code> role to be able to login, which we can set up in the <code>conf/tomcat-users.xml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;role rolename="manager"/&gt;
&lt;user username="scott" password="tiger" roles="tomcat,manager"/&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_different_login_modules"><a class="anchor" href="#_using_different_login_modules"></a>Using different login modules</h4>
<div class="paragraph">
<p>If you want to use your own login modules instead of <code>conf/tomcat-users.xml</code> file, you can do it by removing <code>TomcatAuthenticationContainerDiscovery</code> from
system properties and pointing to <code>login.conf</code> file with your login modules configuration, something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export CATALINA_OPTS="-Dhawtio.authenticationContainerDiscoveryClasses= -Dhawtio.realm=hawtio -Djava.security.auth.login.config=$CATALINA_BASE/conf/login.conf"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can configure JAAS in file <code>TOMCAT_HOME/conf/login.conf</code> (see <a href="#_jetty">Jetty</a> for an example of the file).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keycloak_integration"><a class="anchor" href="#_keycloak_integration"></a>Keycloak Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hawtio can be integrated with <a href="https://www.keycloak.org">Keycloak</a> for SSO authentication. See <a href="keycloak.html" class="xref page">Keycloak Integration</a>.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
